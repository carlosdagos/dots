#
# Don't need any downloading of email,
# maybe later
#
source ~/.mutt/colors
source ~/.mutt/accounts/personal
source ~/.mutt/gpg.rc

set my_pass = "`1pass --path ~/Dropbox/1Password/1Password.agilekeychain GoogleMutt`"

set from      = "carlos.dagostino@gmail.com"
set realname  = "Carlos D."
set imap_user = "carlos.dagostino@gmail.com"
set imap_pass = "$my_pass"

# Remote Gmail Folders
set folder    = "imaps://imap.gmail.com:993"
set spoolfile = "+INBOX"
set postponed = "+[Gmail].Drafts"
set trash     = "+[Gmail]/Trash"
set signature = "~/.mutt/signature"
set smtp_authenticators = 'gssapi:login'
set norecord

# SMTP Settings to send email
set smtp_url  = "smtp://carlos.dagostino@smtp.gmail.com:587/"
set smtp_pass = "$my_pass"

# Local folders for caching
unset ssl_usesystemcerts
set header_cache =~/.mutt/cache/headers
set certificate_file =~/.mutt/certificates
set alias_file=~/.mutt/aliases

# Set editor to create new email
set editor="nvim +13 -c 'set nobackup' -c 'set noswapfile' -c 'set nowritebackup' -c 'set tw=72 ft=mail noautoindent'"

# main options
set realname     = "Carlos D."
set mail_check   = 0
set envelope_from
set send_charset = "utf-8"

# view html automatically
set mailcap_path = "~/.mutt/mailcap"
auto_view text/html
# save html for last
alternative_order text/plain text/enriched text/html

unset move
set delete
unset confirmappend
set quit
unset mark_old
set hostname=carlosdagos
set hidden_host
set noallow_8bit
set edit_headers

# SSL hardening
set ssl_force_tls=yes
set ssl_starttls=yes
set ssl_use_sslv2=no
set ssl_use_sslv3=no
set ssl_use_tlsv1=no
set ssl_use_tlsv1_1=no
set ssl_use_tlsv1_2=yes
set ssl_verify_dates=yes
set ssl_verify_host=yes

# PGP options
set pgp_sign_as=0xC6D2BCB4
set pgp_replyencrypt=yes
set pgp_timeout=1800

# sort/threading
set sort     = threads
set sort_aux = reverse-last-date-received
set sort_re

# look and feel
set pager_index_lines = 8
set pager_context     = 5
set pager_stop
set menu_scroll
set smart_wrap
set tilde
unset markers

# my own bindings
bind index "G" imap-fetch-mail      # I don't need the default binding
bind index ")" next-page            # Go to next and prev page with parens
bind index "(" previous-page
bind attach <return> view-mailcap   # Convenience for html email

# composing
set fcc_attach
unset mime_forward
set forward_format = "Fwd: %s"
set include
set forward_quote

ignore *                               # first, ignore all headers
unignore from: to: cc: date: subject:  # then, show only these
hdr_order from: to: cc: date: subject: # and in this order

# Contacts
set query_command = "goobook query %s"
bind editor <Tab> complete-query

# Last, but not least, get mutt to display its version on startup.
push <show-version>
message-hook '!(~g|~G) ~b"^-----BEGIN\ PGP\ (SIGNED\ )?MESSAGE"' "exec check-traditional-pgp"
