#!/usr/bin/env nix-shell
#! nix-shell -i bash -p dbus
#
# Uses Spotify's `dbus` interface to control spotify. This file is used
# with the i3 config to allow to use the keyboard as a multimedia keyboard

case "$@" in
    play-pause)
    dbus-send --print-reply \
              --dest=org.mpris.MediaPlayer2.spotify \
                    /org/mpris/MediaPlayer2         \
                     org.mpris.MediaPlayer2.Player.PlayPause
        ;;
    next)
    dbus-send --print-reply \
              --dest=org.mpris.MediaPlayer2.spotify \
                    /org/mpris/MediaPlayer2         \
                     org.mpris.MediaPlayer2.Player.Next
        ;;
    previous) dbus-send --print-reply \
                        --dest=org.mpris.MediaPlayer2.spotify \
                              /org/mpris/MediaPlayer2         \
                               org.mpris.MediaPlayer2.Player.Previous
        ;;
    *) echo "Error: available options are 'play-pause', 'next', and 'previous'" > /dev/stderr
       exit 1
esac
